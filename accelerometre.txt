#include <Wire.h>
#include <Adafruit_Sensor.h>
#include <Adafruit_ADXL345_U.h>

Adafruit_ADXL345_Unified accel = Adafruit_ADXL345_Unified();
bool isStanding = true; // Boolean to record the robot's state.

void setup(void)
{
   // Start serial communication at 9600 baud.
   Serial.begin(9600);

   // Check if the ADXL345 sensor is available.
   if (!accel.begin())
   {
      Serial.println("No valid sensor found");
      while (1); // Infinite loop if the sensor is not found.
   }
}

void loop(void)
{
   sensors_event_t event;

   // Get acceleration data from the ADXL345 sensor.
   accel.getEvent(&event);

   // Display acceleration values in three axes (X, Y, Z).
   Serial.print("X: "); Serial.print(event.acceleration.x); Serial.print("  ");
   Serial.print("Y: "); Serial.print(event.acceleration.y); Serial.print("  ");
   Serial.print("Z: "); Serial.print(event.acceleration.z); Serial.print("  ");
   Serial.println("m/s^2 "); // Unit for acceleration values.

   // Check if the robot is upside down (you can adjust the value based on your configuration).
   if (event.acceleration.z < -9.0)
   {
      isStanding = false;
      Serial.println("The robot is not standing.");
   }
   else
   {
      isStanding = true;
      Serial.println("The robot is standing.");
   }

   delay(500); // Wait for 500 milliseconds before reading data again.
}
